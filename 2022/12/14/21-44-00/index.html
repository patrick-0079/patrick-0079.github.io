<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Nginx 的学习笔记 | Patrick</title><meta name="author" content="Patrick"><meta name="copyright" content="Patrick"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习 Nginx 的笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginx 的学习笔记">
<meta property="og:url" content="https://patrick-0079.github.io/2022/12/14/21-44-00/index.html">
<meta property="og:site_name" content="Patrick">
<meta property="og:description" content="学习 Nginx 的笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://patrick-0079.github.io/static/img/avatar.jpg">
<meta property="article:published_time" content="2022-12-14T13:44:00.000Z">
<meta property="article:modified_time" content="2022-12-15T06:55:00.000Z">
<meta property="article:author" content="Patrick">
<meta property="article:tag" content="Note">
<meta property="article:tag" content="Network">
<meta property="article:tag" content="Nginx">
<meta property="article:tag" content="Maintenance">
<meta property="article:tag" content="Baisc">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://patrick-0079.github.io/static/img/avatar.jpg"><link rel="shortcut icon" href="/static/img/logo.ico"><link rel="canonical" href="https://patrick-0079.github.io/2022/12/14/21-44-00/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Nginx 的学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-15 14:55:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/static/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">20</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/history"><i class="fa-fw fa fa-history"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/static/img/background.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Patrick</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/history"><i class="fa-fw fa fa-history"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Nginx 的学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-14T13:44:00.000Z" title="发表于 2022-12-14 21:44:00">2022-12-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-15T06:55:00.000Z" title="更新于 2022-12-15 14:55:00">2022-12-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Note/">Note</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Note/Network/">Network</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Note/Network/Nginx/">Nginx</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>20分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Nginx 的学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Nginx-学习笔记"><a href="#Nginx-学习笔记" class="headerlink" title="Nginx 学习笔记"></a><strong>Nginx</strong> 学习笔记</h1><p>Nginx 是一个轻量级的 Web 服务器 基础功能有反向代理, 邮件代理等, 同时其具有可高度定制的特点.<br>Nginx 有众多插件, 配合插件 Nginx 能实现直播等许多功能.<br>Nginx 的核心学习目标是它的配置文件 <mark class="hl-label default">nginx.conf</mark> </p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>以下面的配置文件为例</p>
<div class="note info simple"><p>配置文件中的配置是常用配置, 值有可能不是是默认值</p>
</div>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"># 全局块</span><br><span class="line">user                    nobody; # 启动用户</span><br><span class="line">worker_processes        1; # 业务进程数量(子进程 worker), 一般不超过ngingx可用的CPU内核数量</span><br><span class="line">error_log               logs/error.log          info; # 全局日志设置, 最后一个值为日志级别, 日志级别取值有 debug, info, notice, warn, error, crit, alert, emerg</span><br><span class="line">pid                     logs/nginx.pid; # Nginx 的 pid 存放地址</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events { # events 块</span><br><span class="line">    worker_connections  1024; # 单个业务进程可接受的连接数</span><br><span class="line">    accept_mutex        on; #设置网路连接序列化, 防止惊群现象发生</span><br><span class="line">    multi_accept        off; #设置一个进程是否同时接受多个网络连接</span><br><span class="line">    use                 epoll; #事件驱动模型, 取值有 select, poll, kqueue, epoll, resig, /dev/poll, eventport</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http { # http 块</span><br><span class="line">    include             mime.types; # 引入 mime.type 模块(文件扩展名与文件类型映射表)</span><br><span class="line">    default_type        application/octet-stream; # 若 mime 类型未匹配成功时使用的传输方式方式</span><br><span class="line">    sendfile            on; # 设置 sendfile 方式传输文件</span><br><span class="line">    keepalive_timeout   65; # 连接超时时间</span><br><span class="line">    gzip                on; # gzip 压缩</span><br><span class="line">    access_log          logs/access.log     format_name; #服务日志, 第一个值为 off 时为取消服务日志. 第一个值时日志地址, 第二个值是格式化模板(可缺省)</span><br><span class="line">    log_format          format_name         '### $remote_addr ### $request ### $status'; # 日志格式话模板</span><br><span class="line">    sendfile_max_chunk  0;  #每个进程每次调用传输数量不能大于设定的值, 0代表不设上限</span><br><span class="line">    error_page          404 500             /50x.html; # 错误页配置, 第一组值是错误码, 第二个值是错误页面的URI</span><br><span class="line">    deny                127.0.0.1 1; # 拒绝的ip组, 取值可有 address, CIDR, unix:, all</span><br><span class="line">    allow               172.18.5.54; # 允许的ip 组, 取值可有 address, CIDR, unix:, all</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    upstream servers_name { # 别名组</span><br><span class="line">        server 127.0.0.1:8000 weight=7 down; # weight 是权重, 缺省默认是1. down 代表下线, 缺省代表在线</span><br><span class="line">        server 127.0.0.1:8001 backup; # backup 代表是备用机, 有其他可访问实例时不会被访问</span><br><span class="line">        ...</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    server { # http.server 块 (server 块)</span><br><span class="line">        listen                  80; # 服务主机监听的端口号</span><br><span class="line">        server_name             localhost; # 服务主机的主机名或域名</span><br><span class="line">        keepalive_requests      120; # 单连接请求上限次数</span><br><span class="line">        sendfile                on; # 允许 sendfile 方式传输文件</span><br><span class="line">        deny                    127.0.0.1 1; # 拒绝的ip组, 取值可有 address, CIDR, unix:, all</span><br><span class="line">        allow                   172.18.5.54; # 允许的ip 组, 取值可有 address, CIDR, unix:, all</span><br><span class="line">        error_page   500 502 503 504  /50x.html; # 错误页配置</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        location / { # http.sevet.location 块 (location 块), / 是URI匹配规则</span><br><span class="line">            root            html; # URI指向的文件夹</span><br><span class="line">            index           index.html index.htm; # 默认页组</span><br><span class="line">            proxy_pass      http://127.0.0.1:8000;  #请求转发, 利用别名组代替地址可实现负载均衡</span><br><span class="line">            deny            127.0.0.1 1; # 拒绝的ip组, 取值可有 address, CIDR, unix:, all</span><br><span class="line">            allow           172.18.5.54; # 允许的ip 组, 取值可有 address, CIDR, unix:, all</span><br><span class="line">            ...</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="核心模块指令"><a href="#核心模块指令" class="headerlink" title="核心模块指令"></a>核心模块指令</h2><details class="toggle" style="border: 1px solid  #cfd2d5"><summary class="toggle-button" style="background-color:  #cfd2d5;color:  #020304">查看所有指令解释</summary><div class="toggle-content"><h3 id="absolute-redirect"><a href="#absolute-redirect" class="headerlink" title="absolute_redirect"></a>absolute_redirect</h3><ul>
<li>取值: on | off (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 重定向绝对地址<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#absolute_redirect"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="aio"><a href="#aio" class="headerlink" title="aio"></a>aio</h3><ul>
<li>取值: on | off | threads[=pool] (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 异步文件 I/O<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#aio"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="aio-write"><a href="#aio-write" class="headerlink" title="aio_write"></a>aio_write</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 当开启 aio 时指定是否将其用于写入文件<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#aio_write"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><ul>
<li>取值: 具体路径</li>
<li>可配置模块: location</li>
<li>解释: 将匹配的访问路径重新指定为新定义的文件路径. alias 指定的目录是 location 路径的实际目录，其所在 location 的 rewrite 指令不能使用 break 参数<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#alias"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="auth-delay"><a href="#auth-delay" class="headerlink" title="auth_delay"></a>auth_delay</h3><ul>
<li>取值: 具体时间 (默认 0s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 当访问受密码、子请求结果或 JWT 限制的资源时，使用 401 响应代码延迟处理未经授权的请求，以防止计时攻击<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#auth_delay"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="chunked-transfer-encoding"><a href="#chunked-transfer-encoding" class="headerlink" title="chunked_transfer_encoding"></a>chunked_transfer_encoding</h3><ul>
<li>取值: on | off (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 在 HTTP/1.1 中禁用分块传输编码<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#chunked_transfer_encoding"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-body-buffer-size"><a href="#client-body-buffer-size" class="headerlink" title="client_body_buffer_size"></a>client_body_buffer_size</h3><ul>
<li>取值: 具体大小 (默认 16k)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 用于读取客户端请求正文的缓冲区大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-body-in-file-only"><a href="#client-body-in-file-only" class="headerlink" title="client_body_in_file_only"></a>client_body_in_file_only</h3><ul>
<li>取值: on | clean | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 保存整个客户端请求正文到文件中<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_in_file_only"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-body-in-single-buffer"><a href="#client-body-in-single-buffer" class="headerlink" title="client_body_in_single_buffer"></a>client_body_in_single_buffer</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 保存整个客户端请求正文在单个缓冲区中. 建议在使用变量时使用该指令, 以节省所涉及的复制操作数<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_in_single_buffer"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-body-temp-path"><a href="#client-body-temp-path" class="headerlink" title="client_body_temp_path"></a>client_body_temp_path</h3><ul>
<li>取值: 具体路径 [级别[级别[级别]]]</li>
<li>可配置模块: http, server, location</li>
<li>解释: 定义用于存储保存客户端请求正文的临时文件的目录. 在指定的下最多可以使用三级子目录层次结构目录<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_temp_path"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-body-timeout"><a href="#client-body-timeout" class="headerlink" title="client_body_timeout"></a>client_body_timeout</h3><ul>
<li>取值: 具体时间 (默认 60s)</li>
<li>可配置模块: http, server</li>
<li>解释: 读取客户端请求正文的超时时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-header-buffer-size"><a href="#client-header-buffer-size" class="headerlink" title="client_header_buffer_size"></a>client_header_buffer_size</h3><ul>
<li>取值: 具体大小 (默认 1k)</li>
<li>可配置模块: http, server</li>
<li>解释: 用于读取客户端请求标头的缓冲区大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_buffer_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-header-timeout"><a href="#client-header-timeout" class="headerlink" title="client_header_timeout"></a>client_header_timeout</h3><ul>
<li>取值: 具体时间 (默认 60s)</li>
<li>可配置模块: http, server</li>
<li>解释: 读取客户端请求标头的超时时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="client-max-body-size"><a href="#client-max-body-size" class="headerlink" title="client_max_body_size"></a>client_max_body_size</h3><ul>
<li>取值: 具体大小 (默认 1m)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 客户端请求正文允许的最大大小, 设置为 0 为不限制<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="connection-pool-size"><a href="#connection-pool-size" class="headerlink" title="connection_pool_size"></a>connection_pool_size</h3><ul>
<li>取值: 具体大小 (默认 512)</li>
<li>可配置模块: http, server</li>
<li>解释: 准确调整每个连接的内存分配<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#connection_pool_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="default-type"><a href="#default-type" class="headerlink" title="default_type"></a>default_type</h3><ul>
<li>取值: mime.types 模块中的类型 (默认 text/plain)</li>
<li>可配置模块: http, server</li>
<li>解释: 定义响应的默认 MIME 类型<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#default_type"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="directio"><a href="#directio" class="headerlink" title="directio"></a>directio</h3><ul>
<li>取值: 具体大小 | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 读取大于或等于设定大小的文件时, 允许使用 flag<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#directio"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="directio-alignment"><a href="#directio-alignment" class="headerlink" title="directio_alignment"></a>directio_alignment</h3><ul>
<li>取值: off | on if_not_owner [from=part] (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: off: 允许和不检查路径名中的符号链接; on: 如果路径名的任何组件是符号链接, 对文件的访问被拒绝; if_not_owner, from: 参见详细解释<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#directio_alignment"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="error-page"><a href="#error-page" class="headerlink" title="error_page"></a>error_page</h3><ul>
<li>取值: 错误码… [=[response]] URI</li>
<li>可配置模块: http, server, location</li>
<li>解释: 指定错误码对应的错误页<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#error_page"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="etag"><a href="#etag" class="headerlink" title="etag"></a>etag</h3><ul>
<li>取值: on | off (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用 ETag 的自动生成的静态资源的响应标头字段<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#etag"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="http"><a href="#http" class="headerlink" title="http"></a>http</h3><p><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#http"><mark class="hl-label blue">详细解释</mark> </a></p>
<h3 id="if-modified-since"><a href="#if-modified-since" class="headerlink" title="if_modified_since"></a>if_modified_since</h3><ul>
<li>取值: off | exact | before (默认 exact)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 对文件修改时间的服务端校验提供了两种不同的比对方式. 值为 exact 时, Nginx 会将请求头中 if_modified_since 的时间与响应数据中的时间做精确匹配, 即完全相等才认为客户端缓存有效, 返回响应状态码 304; 值为 before 时, 在请求头中 if_modified_since 的时间大于响应数据中的时间也认为客户端缓存有效, 返回响应状态码 304. 该指令功能控制处于数据流的出入口, 对于任何形式产生的响应数据都有效, 值为 off 时, 关闭 Nginx 对客户端缓存文件修改时间的服务端校验功能<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#if_modified_since"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="ignore-invalid-headers"><a href="#ignore-invalid-headers" class="headerlink" title="ignore_invalid_headers"></a>ignore_invalid_headers</h3><ul>
<li>取值: on | off (默认 on)</li>
<li>可配置模块: http, server</li>
<li>解释: 控制是否应忽略名称无效的标头字段<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#ignore_invalid_headers"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="internal"><a href="#internal" class="headerlink" title="internal"></a>internal</h3><ul>
<li>取值: 无</li>
<li>可配置模块: location</li>
<li>解释: 指定给定位置只能用于内部请求<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#internal"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="keepalive-disable"><a href="#keepalive-disable" class="headerlink" title="keepalive_disable"></a>keepalive_disable</h3><ul>
<li>取值: none | browser …(默认 msie6)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 禁用与行为异常的浏览器的保持活动连接<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_disable"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="keepalive-requests"><a href="#keepalive-requests" class="headerlink" title="keepalive_requests"></a>keepalive_requests</h3><ul>
<li>取值: 具体数字 (默认 1000)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置可以通过一个保持活动连接提供的最大请求数<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_requests"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="keepalive-time"><a href="#keepalive-time" class="headerlink" title="keepalive_time"></a>keepalive_time</h3><ul>
<li>取值: 具体时间 (默认 1h)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 限制可以通过一个保持活动连接来处理请求的最长时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_time"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="keepalive-timeout"><a href="#keepalive-timeout" class="headerlink" title="keepalive_timeout"></a>keepalive_timeout</h3><ul>
<li>取值: 具体时间 [header_timeout] (默认 75s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 第一个参数设置一个超时间, 在此期间客户端连接将在服务器端保持打开状态 (值 0 将禁用保持活动状态的客户端连接). 第二个可选参数设置在 “Keep-Alive: timeout=” 响应标头字段.<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_timeout"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="large-client-header-buffers"><a href="#large-client-header-buffers" class="headerlink" title="large_client_header_buffers"></a>large_client_header_buffers</h3><ul>
<li>取值: 具体数量 具体大小 (默认 4 8k)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 对读取请求头设置最大数量和大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#large_client_header_buffers"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="limit-except"><a href="#limit-except" class="headerlink" title="limit_except"></a>limit_except</h3><ul>
<li>取值: Http_method{…}</li>
<li>可配置模块: location</li>
<li>解释: 限制允许在某个位置内使用的 HTTP 方法</li>
<li>例子:<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">limit_except GET { # 限制对除 GET 和 HEAD 之外的所有方法的访问</span><br><span class="line">    allow 192.168.1.0/32;</span><br><span class="line">    deny  all;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_except"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="limit-rate"><a href="#limit-rate" class="headerlink" title="limit_rate"></a>limit_rate</h3><ul>
<li>取值: 具体速率 (默认 0, 单位 B/s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 限制每个连接向客户端传输响应的速率<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="limit-rate-after"><a href="#limit-rate-after" class="headerlink" title="limit_rate_after"></a>limit_rate_after</h3><ul>
<li>取值: 具体大小 (默认 0)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置初始值, 在此之后进一步传输响应将受到速率限制<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="lingering-close"><a href="#lingering-close" class="headerlink" title="lingering_close"></a>lingering_close</h3><ul>
<li>取值: off | on | always (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 控制 nginx 关闭客户端连接的方式<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#lingering_close"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="lingering-time"><a href="#lingering-time" class="headerlink" title="lingering_time"></a>lingering_time</h3><ul>
<li>取值: 具体时间 (默认 30s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 当 lingering_close 生效时, 此指令指定 Nginx 处理 (读取和忽略) 来自客户端的其他数据的最长时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#lingering_time"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="lingering-timeout"><a href="#lingering-timeout" class="headerlink" title="lingering_timeout"></a>lingering_timeout</h3><ul>
<li>取值: 具体时间 (默认 5s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 当 lingering_close 生效时, 此指令指定更多客户端数据到达的最长等待时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#lingering_timeout"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="listen"><a href="#listen" class="headerlink" title="listen"></a>listen</h3><ul>
<li>取值: 参见详细解释</li>
<li>可配置模块: server</li>
<li>解释: 参见详细解释<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#listen"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="location"><a href="#location" class="headerlink" title="location"></a>location</h3><p><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#location"><mark class="hl-label blue">详细解释</mark> </a></p>
<h3 id="log-not-found"><a href="#log-not-found" class="headerlink" title="log_not_found"></a>log_not_found</h3><ul>
<li>取值: on | off (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用将有关未找到文件的错误记录到 error_log 中<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#log_not_found"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="log-subrequest"><a href="#log-subrequest" class="headerlink" title="log_subrequest"></a>log_subrequest</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用将子请求记录到 access_log<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#log_subrequest"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="max-ranges"><a href="#max-ranges" class="headerlink" title="max_ranges"></a>max_ranges</h3><ul>
<li>取值: 具体值</li>
<li>可配置模块: http, server, location</li>
<li>解释: 限制字节范围请求中允许的最大范围数, 值 0 将禁用字节范围支持<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#max_ranges"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="merge-slashes"><a href="#merge-slashes" class="headerlink" title="merge_slashes"></a>merge_slashes</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server</li>
<li>解释: 启用或禁用两个或多个相邻斜杠在 URI 中变成单个斜杠的压缩<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#merge_slashes"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="msie-padding"><a href="#msie-padding" class="headerlink" title="msie_padding"></a>msie_padding</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用向状态为 MSIE 客户端的响应添加注释<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#msie_padding"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="msie-refresh"><a href="#msie-refresh" class="headerlink" title="msie_refresh"></a>msie_refresh</h3><ul>
<li>取值: max=N [inactive=time] | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 配置可存储以下内容的缓存<ul>
<li>打开文件描述符，其大小和修改时间;</li>
<li>关于目录存在的信息;</li>
<li>文件查找错误<br>  max: 设置缓存中的最大元素数; 在缓存溢出时，删除最近最少使用的 （LRU） 元素;<br>  inactive: 定义从缓存中删除元素的时间 如果在此期间未被访问; 默认情况下，它是 60 秒;<br>  off: 禁用缓存<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#msie_refresh"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
</li>
</ul>
<h3 id="open-file-cache-errors"><a href="#open-file-cache-errors" class="headerlink" title="open_file_cache_errors"></a>open_file_cache_errors</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 按open_file_cache启用或禁用文件查找错误的缓存<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#open_file_cache_errors"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="open-file-cache-min-uses"><a href="#open-file-cache-min-uses" class="headerlink" title="open_file_cache_min_uses"></a>open_file_cache_min_uses</h3><ul>
<li>取值: 具体数值 (默认 1)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置在 open_file_cache 指令的参数所配置的时间段内文件访问的最小次数<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#open_file_cache_min_uses"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="open-file-cache-valid"><a href="#open-file-cache-valid" class="headerlink" title="open_file_cache_valid"></a>open_file_cache_valid</h3><ul>
<li>取值: 具体时间 (默认 60s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置验证 open_file_cache 的时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#open_file_cache_valid"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="output-buffers"><a href="#output-buffers" class="headerlink" title="output_buffers"></a>output_buffers</h3><ul>
<li>取值: 具体数值 具体大小 (默认 2 32k)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置用于从磁盘读取响应的缓冲区<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#output_buffers"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="port-in-redirect"><a href="#port-in-redirect" class="headerlink" title="port_in_redirect"></a>port_in_redirect</h3><ul>
<li>取值: on | off (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用在 Nginx 发出的绝对重定向中指定端口<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#port_in_redirect"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="postpone-output"><a href="#postpone-output" class="headerlink" title="postpone_output"></a>postpone_output</h3><ul>
<li>取值: 具体大小 (默认 1460, 单位 B)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 配置客户端数据的传输将推迟到 Nginx 至少有一定数量的字节数据要发送. 值 0 将禁用延迟数据传输<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#postpone_output"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="read-ahead"><a href="#read-ahead" class="headerlink" title="read_ahead"></a>read_ahead</h3><ul>
<li>取值: 具体大小 (默认 0)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置处理文件时内核的预读取量<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#read_ahead"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="recursive-error-pages"><a href="#recursive-error-pages" class="headerlink" title="recursive_error_pages"></a>recursive_error_pages</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用使用 error_page 指令执行多个重定向<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#recursive_error_pages"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="request-pool-size"><a href="#request-pool-size" class="headerlink" title="request_pool_size"></a>request_pool_size</h3><ul>
<li>取值: 具体大小 (默认 4k)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 调整每个请求的内存分配大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#request_pool_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="reset-timedout-connection"><a href="#reset-timedout-connection" class="headerlink" title="reset_timedout_connection"></a>reset_timedout_connection</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用重置超时连接, 以及使用非标准代码 444 关闭的连接<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#reset_timedout_connection"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="resolver"><a href="#resolver" class="headerlink" title="resolver"></a>resolver</h3><ul>
<li>取值: address … [valid=time] [ipv4=on|off] [ipv6=on|off] [status_zone=zone]</li>
<li>可配置模块: http, server, location</li>
<li>解释: 配置用于解析上游服务器名称的名称服务器进入地址<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#resolver"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="resolver-timeout"><a href="#resolver-timeout" class="headerlink" title="resolver_timeout"></a>resolver_timeout</h3><ul>
<li>取值: 具体时间 (默认 30s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置 resolver 名称解析的超时时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#resolver_timeout"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="root"><a href="#root" class="headerlink" title="root"></a>root</h3><ul>
<li>取值: 具体时间 (默认 30s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置请求的根目录<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#root"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="satisfy"><a href="#satisfy" class="headerlink" title="satisfy"></a>satisfy</h3><ul>
<li>取值: all | any (默认 any)</li>
<li>可配置模块: http, server, location</li>
<li>解释: access 阶段按照 access 模块, auth_basic 模块, auth_request模块, 其他模块执行顺序<br>  all: access 阶段的所有模块都是通过, 才可以继续往下面执行。<br>  any: 所有模块中任何一个验证通过就放行<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#satisfy"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="send-lowat"><a href="#send-lowat" class="headerlink" title="send_lowat"></a><del>send_lowat</del></h3><ul>
<li>取值: 具体大小 (默认 0)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 如果指令设置为非零值, Nginx 将尝试最小化 使用 kqueue 方法的任一标志对客户端套接字执行的发送操作数 或套接字选项.此指令在 Linux, Solaris 和 Windows 上将被忽略<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#send_lowat"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="send-timeout"><a href="#send-timeout" class="headerlink" title="send_timeout"></a>send_timeout</h3><ul>
<li>取值: 具体时间 (默认 60s)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置向客户端传输响应的超时时间<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#send_timeout"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="sendfile"><a href="#sendfile" class="headerlink" title="sendfile"></a>sendfile</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置 sendfile 方式传输文件<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#sendfile"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="sendfile-max-chunk"><a href="#sendfile-max-chunk" class="headerlink" title="sendfile_max_chunk"></a>sendfile_max_chunk</h3><ul>
<li>取值: 具体大小 (默认 2m)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 限制单词调用传输的数据量<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#sendfile_max_chunk"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><p><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server"><mark class="hl-label blue">详细解释</mark> </a></p>
<h3 id="server-name"><a href="#server-name" class="headerlink" title="server_name"></a>server_name</h3><ul>
<li>取值: name …</li>
<li>可配置模块: http</li>
<li>解释: 设置虚拟服务器的名称, 可使用正则表达式或通配符<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server_name"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="server-name-in-redirect"><a href="#server-name-in-redirect" class="headerlink" title="server_name_in_redirect"></a>server_name_in_redirect</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用在 Nginx 发送的绝对重定向中由 server_name 指令指定的主服务器名称的使用<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server_name_in_redirect"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="server-names-hash-bucket-size"><a href="#server-names-hash-bucket-size" class="headerlink" title="server_names_hash_bucket_size"></a>server_names_hash_bucket_size</h3><ul>
<li>取值: 具体大小 (默认取决于处理器高速缓存行大小 32 | 64 | 128)</li>
<li>可配置模块: http</li>
<li>解释: 设置服务器名称哈希表的存储空间大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_bucket_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="server-names-hash-max-size"><a href="#server-names-hash-max-size" class="headerlink" title="server_names_hash_max_size"></a>server_names_hash_max_size</h3><ul>
<li>取值: 具体大小 (默认 512)</li>
<li>可配置模块: http</li>
<li>解释: 设置服务器名称哈希表的最大值<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_max_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="server-tokens"><a href="#server-tokens" class="headerlink" title="server_tokens"></a>server_tokens</h3><ul>
<li>取值: on | off | build | string (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用在错误页面上服务器响应标头字段<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server_tokens"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="subrequest-output-buffer-size"><a href="#subrequest-output-buffer-size" class="headerlink" title="subrequest_output_buffer_size"></a>subrequest_output_buffer_size</h3><ul>
<li>取值: 具体大小 (默认 4k 或者 8k)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置用于存储子请求的响应正文的存储空间大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#subrequest_output_buffer_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="tcp-nodelay"><a href="#tcp-nodelay" class="headerlink" title="tcp_nodelay"></a>tcp_nodelay</h3><ul>
<li>取值: on | off (默认 on)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置是否把小包组成成大包<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#tcp_nodelay"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="tcp-nopush"><a href="#tcp-nopush" class="headerlink" title="tcp_nopush"></a>tcp_nopush</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 启用或禁用 FreeBSD 或 Linux 上的套接字选项<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#tcp_nopush"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="try-files"><a href="#try-files" class="headerlink" title="try_files"></a>try_files</h3><ul>
<li>取值: file … (URL | =code)</li>
<li>可配置模块: server, location</li>
<li>解释: 按指定顺序检查文件是否存在并使用, 详情参见详细解释<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#try_files"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="types"><a href="#types" class="headerlink" title="types"></a>types</h3><ul>
<li>取值: {…} (默认值  <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">types {</span><br><span class="line">    text/html  html;</span><br><span class="line">    image/gif  gif;</span><br><span class="line">    image/jpeg jpg jpeg;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
  )</li>
<li>可配置模块: server, location</li>
<li>解释: 将文件扩展名映射到 MIME 类型的响应<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#types"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="types-hash-bucket-size"><a href="#types-hash-bucket-size" class="headerlink" title="types_hash_bucket_size"></a>types_hash_bucket_size</h3><ul>
<li>取值: 具体大小 (默认 64)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置类型哈希表的存储空间大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#types_hash_bucket_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="types-hash-max-size"><a href="#types-hash-max-size" class="headerlink" title="types_hash_max_size"></a>types_hash_max_size</h3><ul>
<li>取值: 具体大小 (默认 1024)</li>
<li>可配置模块: http, server, location</li>
<li>解释: 设置最大类型哈希表<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#types_hash_max_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="underscores-in-headers"><a href="#underscores-in-headers" class="headerlink" title="underscores_in_headers"></a>underscores_in_headers</h3><ul>
<li>取值: on | off (默认 off)</li>
<li>可配置模块: http, server</li>
<li>解释: 启用或禁用在客户端请求标头字段中使用下划线<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#underscores_in_headers"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="variables-hash-bucket-size"><a href="#variables-hash-bucket-size" class="headerlink" title="variables_hash_bucket_size"></a>variables_hash_bucket_size</h3><ul>
<li>取值: 具体大小 (默认 64)</li>
<li>可配置模块: http</li>
<li>解释: 设置变量哈希表的存储空间大小<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#variables_hash_bucket_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
<h3 id="variables-hash-max-size"><a href="#variables-hash-max-size" class="headerlink" title="variables_hash_max_size"></a>variables_hash_max_size</h3><ul>
<li>取值: 具体大小 (默认 1024)</li>
<li>可配置模块: http</li>
<li>解释: 设置变量哈希表的最大值<br><a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#variables_hash_max_size"><mark class="hl-label blue">详细解释</mark> </a></li>
</ul>
</div></details>

<h2 id="嵌入式变量"><a href="#嵌入式变量" class="headerlink" title="嵌入式变量"></a>嵌入式变量</h2><details class="toggle" style="border: 1px solid  #cfd2d5"><summary class="toggle-button" style="background-color:  #cfd2d5;color:  #020304">查看所有嵌入式变量解释</summary><div class="toggle-content"><h3 id="arg-name"><a href="#arg-name" class="headerlink" title="$arg_name"></a>$arg_name</h3><p>请求行中的参数名称</p>
<h3 id="args"><a href="#args" class="headerlink" title="$args"></a>$args</h3><p>请求行中的参数</p>
<h3 id="binary-remote-addr"><a href="#binary-remote-addr" class="headerlink" title="$binary_remote_addr"></a>$binary_remote_addr</h3><p>二进制形式的客户端地址, 值的长度始终为 4 个字节 (IPv4), 或 16 个字节 (IPv6)</p>
<h3 id="body-bytes-sent"><a href="#body-bytes-sent" class="headerlink" title="$body_bytes_sent"></a>$body_bytes_sent</h3><p>发送到客户端的字节数，不计算响应标头; 此变量与 Apache 模块的 “” 参数兼容%Bmod_log_config</p>
<h3 id="bytes-sent"><a href="#bytes-sent" class="headerlink" title="$bytes_sent"></a>$bytes_sent</h3><p>发送到客户端的字节数</p>
<h3 id="connection"><a href="#connection" class="headerlink" title="$connection"></a>$connection</h3><p>连接序列号</p>
<h3 id="connection-requests"><a href="#connection-requests" class="headerlink" title="$connection_requests"></a>$connection_requests</h3><p>当前通过连接发出的请求数</p>
<h3 id="connection-time"><a href="#connection-time" class="headerlink" title="$connection_time"></a>$connection_time</h3><p>连接时间 (以秒为单), 分辨率为毫秒</p>
<h3 id="content-length"><a href="#content-length" class="headerlink" title="$content_length"></a>$content_length</h3><p>Content-Length 请求标头字段</p>
<h3 id="content-type"><a href="#content-type" class="headerlink" title="$content_type"></a>$content_type</h3><p>Content-Type 请求标头字段</p>
<h3 id="cookie-name"><a href="#cookie-name" class="headerlink" title="$cookie_name"></a>$cookie_name</h3><p>Cookie 名称</p>
<h3 id="document-root"><a href="#document-root" class="headerlink" title="$document_root"></a>$document_root</h3><p>对于当前请求 root 或 alias 指令的值</p>
<h3 id="document-uri"><a href="#document-uri" class="headerlink" title="$document_uri"></a>$document_uri</h3><p>同 $uri</p>
<h3 id="host"><a href="#host" class="headerlink" title="$host"></a>$host</h3><p>按以下优先级顺序:</p>
<ol>
<li>请求行中的主机名，</li>
<li>Host 请求标头字段中的主机名</li>
<li>与请求匹配的服务器名称</li>
</ol>
<h3 id="hostname"><a href="#hostname" class="headerlink" title="$hostname"></a>$hostname</h3><p>主机名</p>
<h3 id="http-name"><a href="#http-name" class="headerlink" title="$http_name"></a>$http_name</h3><p>任意请求标头字段. 变量名称的最后一部分是转换后的字段名称改为小写且短划线替换为下划线</p>
<h3 id="https"><a href="#https" class="headerlink" title="$https"></a>$https</h3><p>如果连接不在 SSL 模式下运行该变量为空字符串</p>
<h3 id="is-args"><a href="#is-args" class="headerlink" title="$is_args"></a>$is_args</h3><p>求行有参数, 无参数时空字符串</p>
<h3 id="limit-rate"><a href="#limit-rate" class="headerlink" title="$limit_rate"></a>$limit_rate</h3><p>设置此变量可启用响应速率限制. 见limit_rate指令</p>
<h3 id="msec"><a href="#msec" class="headerlink" title="$msec"></a>$msec</h3><p>当前时间(以秒为单位) 分辨率是毫秒</p>
<h3 id="nginx-version"><a href="#nginx-version" class="headerlink" title="$nginx_version"></a>$nginx_version</h3><p>Nginx 版本</p>
<h3 id="pid"><a href="#pid" class="headerlink" title="$pid"></a>$pid</h3><p>worker 进程的 PID</p>
<h3 id="pipe"><a href="#pipe" class="headerlink" title="$pipe"></a>$pipe</h3><p>请求已通过管道传输</p>
<h3 id="proxy-protocol-addr"><a href="#proxy-protocol-addr" class="headerlink" title="$proxy_protocol_addr"></a>$proxy_protocol_addr</h3><p>来自 PROXY 协议标头的客户端地址, 在侦听指令中必须事先通过设置参数来启用代理协议</p>
<h3 id="proxy-protocol-port"><a href="#proxy-protocol-port" class="headerlink" title="$proxy_protocol_port"></a>$proxy_protocol_port</h3><p>来自 PROXY 协议标头的客户端端口, 在侦听指令中必须事先通过设置参数来启用代理协议</p>
<h3 id="proxy-protocol-server-addr"><a href="#proxy-protocol-server-addr" class="headerlink" title="$proxy_protocol_server_addr"></a>$proxy_protocol_server_addr</h3><p>来自 PROXY 协议标头的服务器地址, 在侦听指令中必须事先通过设置参数来启用代理协议</p>
<h3 id="proxy-protocol-server-port"><a href="#proxy-protocol-server-port" class="headerlink" title="$proxy_protocol_server_port"></a>$proxy_protocol_server_port</h3><p>来自 PROXY 协议标头的服务器端口, 在侦听指令中必须事先通过设置参数来启用代理协议</p>
<h3 id="proxy-protocol-tlv-name"><a href="#proxy-protocol-tlv-name" class="headerlink" title="$proxy_protocol_tlv_name"></a>$proxy_protocol_tlv_name</h3><p>来自代理协议标头的 TLV, 在侦听指令中必须事先通过设置参数来启用代理协议</p>
<h4 id="name"><a href="#name" class="headerlink" title="name"></a>name</h4><p>name 取值可以是 TLV 类型名称或其数值以及 SSL TLV 类型名或其数值<br>SSL TLV类型名或其数值都以 ssl_ 开头<br>支持以下 TLV 类型名称</p>
<ul>
<li>alpn (0x01): 通过连接使用的上层协议</li>
<li>authority (0x02): 客户端传递的主机名值</li>
<li>unique_id (0x05): 唯一的连接 ID</li>
<li>netns (0x30): 命名空间的名称</li>
<li>ssl (0x20): 二进制 SSL TLV 结构<br>支持以下 SSL TLV 类型名称</li>
<li>ssl_version (0x21): 客户端连接中使用的 SSL 版本</li>
<li>ssl_cn (0x22): SSL 证书公用名</li>
<li>ssl_cipher (0x23): 所用密码的名称</li>
<li>ssl_sig_alg (0x24): 用于对证书进行签名的算法</li>
<li>ssl_key_alg (0x25): 公钥算法</li>
<li>ssl_verify: 客户端 SSL 证书验证结果 (如果客户端提供了证书) 并成功验证, 否则不为 0</li>
</ul>
<h3 id="query-string"><a href="#query-string" class="headerlink" title="$query_string"></a>$query_string</h3><p>同 $args</p>
<h3 id="realpath-root"><a href="#realpath-root" class="headerlink" title="$realpath_root"></a>$realpath_root</h3><p>对于当前请求对应于根或别名指令值的绝对路径名, 将所有符号链接解析为真实路径</p>
<h3 id="remote-addr"><a href="#remote-addr" class="headerlink" title="$remote_addr"></a>$remote_addr</h3><p>客户地址</p>
<h3 id="remote-port"><a href="#remote-port" class="headerlink" title="$remote_port"></a>$remote_port</h3><p>客户端端口</p>
<h3 id="remote-user"><a href="#remote-user" class="headerlink" title="$remote_user"></a>$remote_user</h3><p>基本身份验证提供的用户名</p>
<h3 id="request"><a href="#request" class="headerlink" title="$request"></a>$request</h3><p>完整的原始请求行</p>
<h3 id="request-body"><a href="#request-body" class="headerlink" title="$request_body"></a>$request_body</h3><p>请求正文</p>
<h3 id="request-body-file"><a href="#request-body-file" class="headerlink" title="$request_body_file"></a>$request_body_file</h3><p>具有请求正文的临时文件的名称</p>
<h3 id="request-completion"><a href="#request-completion" class="headerlink" title="$request_completion"></a>$request_completion</h3><p>请求未完成时为空字符串, 否则是 OK</p>
<h3 id="request-filename"><a href="#request-filename" class="headerlink" title="$request_filename"></a>$request_filename</h3><p>当前请求的文件路径</p>
<h3 id="request-id"><a href="#request-id" class="headerlink" title="$request_id"></a>$request_id</h3><p>唯一请求标识符</p>
<h3 id="request-length"><a href="#request-length" class="headerlink" title="$request_length"></a>$request_length</h3><p>请求长度 (包括请求行、标头和请求正文)</p>
<h3 id="request-method"><a href="#request-method" class="headerlink" title="$request_method"></a>$request_method</h3><p>请求方法</p>
<h3 id="request-time"><a href="#request-time" class="headerlink" title="$request_time"></a>$request_time</h3><p>自从客户端读取第一个字节以来经过的请求处理时间 (以秒为单位), 分辨率为毫秒</p>
<h3 id="request-uri"><a href="#request-uri" class="headerlink" title="$request_uri"></a>$request_uri</h3><p>完整的原始请求 URI(带参数)</p>
<h3 id="scheme"><a href="#scheme" class="headerlink" title="$scheme"></a>$scheme</h3><p>请求方案 (http 或 https)</p>
<h3 id="sent-http-name"><a href="#sent-http-name" class="headerlink" title="$sent_http_name"></a>$sent_http_name</h3><p>任意响应标头字段 (变量名称的最后一部分是转换后的字段名称改为小写且短划线替换为下划线)</p>
<h3 id="sent-trailer-name"><a href="#sent-trailer-name" class="headerlink" title="$sent_trailer_name"></a>$sent_trailer_name</h3><p>在响应结束时发送的任意字段 (变量名称的最后一部分是转换后的字段名称改为小写且短划线替换为下划线)</p>
<h3 id="server-addr"><a href="#server-addr" class="headerlink" title="$server_addr"></a>$server_addr</h3><p>接受请求的服务器的地址 (计算此变量的值通常需要一次系统调用)</p>
<h3 id="server-name"><a href="#server-name" class="headerlink" title="$server_name"></a>$server_name</h3><p>接受请求的服务器的名称</p>
<h3 id="server-port"><a href="#server-port" class="headerlink" title="$server_port"></a>$server_port</h3><p>接受请求的服务器的端口</p>
<h3 id="server-protocol"><a href="#server-protocol" class="headerlink" title="$server_protocol"></a>$server_protocol</h3><p>请求协议 (通常是 HTTP/2.0 或 HTTP/1.0 或 HTTP/1.1)</p>
<h3 id="status"><a href="#status" class="headerlink" title="$status"></a>$status</h3><p>响应状态</p>
<h3 id="tcpinfo-rtt-tcpinfo-rttvar-tcpinfo-snd-cwnd-tcpinfo-rcv-space"><a href="#tcpinfo-rtt-tcpinfo-rttvar-tcpinfo-snd-cwnd-tcpinfo-rcv-space" class="headerlink" title="$tcpinfo_rtt, $tcpinfo_rttvar, $tcpinfo_snd_cwnd, $tcpinfo_rcv_space"></a>$tcpinfo_rtt, $tcpinfo_rttvar, $tcpinfo_snd_cwnd, $tcpinfo_rcv_space</h3><p>有关客户端 TCP 连接的信息</p>
<h3 id="time-iso8601"><a href="#time-iso8601" class="headerlink" title="$time_iso8601"></a>$time_iso8601</h3><p>ISO 8601 标准格式的本地时间</p>
<h3 id="time-local"><a href="#time-local" class="headerlink" title="$time_local"></a>$time_local</h3><p>通用日志格式的本地时间</p>
<h3 id="uri"><a href="#uri" class="headerlink" title="$uri"></a>$uri</h3><p>请求中的当前 URI，规范化的值可能会在请求处理过程中发生变化, 例如: 在执行内部重定向或使用索引文件时</p>
</div></details>

<h2 id="location-匹配规则"><a href="#location-匹配规则" class="headerlink" title="location 匹配规则"></a>location 匹配规则</h2><h3 id="路径匹配"><a href="#路径匹配" class="headerlink" title="路径匹配"></a>路径匹配</h3><p>location 后的地址是匹配规则, 可分为前缀和地址两部分, 例如 <code>~/(js|css)</code> 中 <code>~</code> 是前缀, <code>/(js|css)</code> 是正则表达式形式地址</p>
<table>
<thead>
<tr>
<th align="center">前缀</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">缺省</td>
<td>通用匹配</td>
</tr>
<tr>
<td align="center">~</td>
<td>匹配区分大小写正则表达式</td>
</tr>
<tr>
<td align="center">~*</td>
<td>匹配不区分大小写正则表达式</td>
</tr>
<tr>
<td align="center">!~</td>
<td>不匹配区分大小写正则表达式</td>
</tr>
<tr>
<td align="center">!~*</td>
<td>不匹配不区分大小写正则表达式</td>
</tr>
<tr>
<td align="center">=</td>
<td>精确匹配</td>
</tr>
<tr>
<td align="center">@</td>
<td>内部跳转</td>
</tr>
<tr>
<td align="center">^~</td>
<td>普通字符串匹配上以后不再进行正则匹配</td>
</tr>
</tbody></table>
<div class="note info simple"><p>匹配优先级:</p>
<ol>
<li>精确匹配 =</li>
<li>前缀匹配 ^~</li>
<li>按文件中顺序的正则匹配</li>
<li>匹配不带任何修饰的前缀匹配</li>
<li>交给 / 通用匹配</li>
<li>当有匹配成功时候, 停止匹配并按当前匹配规则处理请求</li>
</ol>
</div>

<h3 id="文件及目录匹配"><a href="#文件及目录匹配" class="headerlink" title="文件及目录匹配"></a>文件及目录匹配</h3><ul>
<li>-f和!-f用来判断是否存在文件</li>
<li>-d和!-d用来判断是否存在目录</li>
<li>-e和!-e用来判断是否存在文件或目录</li>
<li>-x和!-x用来判断文件是否可执行</li>
</ul>
<h2 id="URI-重写"><a href="#URI-重写" class="headerlink" title="URI 重写"></a>URI 重写</h2><p>在 location 域内设置 rewrite 指令<br>例如</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> location /page {</span><br><span class="line">    #               匹配内容                    替换内容                   规则</span><br><span class="line">    rewrite     ^/page/([0-9]+)/([0-9]+)$    /page?pageNum=$1&amp;size=$2    break;</span><br><span class="line">    # 规则取值</span><br><span class="line">    # last        相当于apache里面的[L]标记，表示rewrite。</span><br><span class="line">    # break       本条规则匹配完成后，终止匹配，不再匹配后面的规则。</span><br><span class="line">    # redirect    返回302临时重定向，浏览器地址会显示跳转后的URL地址。</span><br><span class="line">    # permanent   返回301永久重定向，浏览器地址会显示跳转后的URL地址。</span><br><span class="line">    proxy_pass http://127.0.0.1:8000; </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="检测请求头里的Referer的网址"><a href="#检测请求头里的Referer的网址" class="headerlink" title="检测请求头里的Referer的网址"></a>检测请求头里的Referer的网址</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location /href {</span><br><span class="line">    valid_referers 127.0.0.1; # 检测请求头里的Referer的网址（可配多个值用空格分隔），取值还可以是none（不存在Referer请求头）、blocked（Referer请求头的值被防火墙或代理服务器删除或伪装，不以http://或https://开头）</span><br><span class="line">    if ($invalid_referer) { # 当检测不通过时</span><br><span class="line">        return 401; # 返回401</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    proxy_pass http://127.0.0.1:8000;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<hr>
<div class="flink"><div class="flink-name">相关文档</div> <div class="flink-list">
          <div class="flink-list-item">
            <a href="https://nginx.org/en/docs/" title="Nginx Documentation" target="_blank">
              <div class="flink-item-icon">
                <img class="no-lightbox" src="https://nginx.org/nginx.png" onerror="this.onerror=null;this.src=&quot;/img/friend_404.gif&quot;" alt="Nginx Documentation">
              </div>
              <div class="flink-item-name">Nginx Documentation</div> 
              <div class="flink-item-desc" title="Nginx 官方文档">Nginx 官方文档</div>
            </a>
          </div>
          <div class="flink-list-item">
            <a href="https://www.runoob.com/regexp/regexp-tutorial.html" title="菜鸟教程" target="_blank">
              <div class="flink-item-icon">
                <img class="no-lightbox" src="null" onerror="this.onerror=null;this.src=&quot;/img/friend_404.gif&quot;" alt="菜鸟教程">
              </div>
              <div class="flink-item-name">菜鸟教程</div> 
              <div class="flink-item-desc" title="正则表达式教程">正则表达式教程</div>
            </a>
          </div></div></div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Note/">Note</a><a class="post-meta__tags" href="/tags/Network/">Network</a><a class="post-meta__tags" href="/tags/Nginx/">Nginx</a><a class="post-meta__tags" href="/tags/Maintenance/">Maintenance</a><a class="post-meta__tags" href="/tags/Baisc/">Baisc</a></div><div class="post_share"><div class="social-share" data-image="/static/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/12/14/11-52-35/" title="Groovy 的学习笔记"><img class="cover" src="/static/img/background.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-14</div><div class="title">Groovy 的学习笔记</div></div></a></div><div><a href="/2022/12/14/19-30-57/" title="Eureka 的学习笔记"><img class="cover" src="/static/img/background.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-14</div><div class="title">Eureka 的学习笔记</div></div></a></div><div><a href="/2022/12/14/09-16-35/" title="Lua 的学习笔记"><img class="cover" src="/static/img/background.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-14</div><div class="title">Lua 的学习笔记</div></div></a></div><div><a href="/2022/12/13/10-01-00/" title="Markdown 的学习笔记"><img class="cover" src="/static/img/background.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-13</div><div class="title">Markdown 的学习笔记</div></div></a></div><div><a href="/2022/12/14/14-29-47/" title="Spring security 的学习笔记"><img class="cover" src="/static/img/background.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-14</div><div class="title">Spring security 的学习笔记</div></div></a></div><div><a href="/2023/01/02/14-50-07/" title="Nacos-note"><img class="cover" src="/static/img/background.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-02</div><div class="title">Nacos-note</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/static/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Patrick</div><div class="author-info__description">大学牲, 今年失业, 目前尚在摆烂中</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">20</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/patrick-0079"><i class="fab fa-github"></i><span>patrick-0079</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="/patrick0079@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Nginx-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-text">Nginx 学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E6%8C%87%E4%BB%A4"><span class="toc-text">核心模块指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#absolute-redirect"><span class="toc-text">absolute_redirect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aio"><span class="toc-text">aio</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aio-write"><span class="toc-text">aio_write</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#alias"><span class="toc-text">alias</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#auth-delay"><span class="toc-text">auth_delay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chunked-transfer-encoding"><span class="toc-text">chunked_transfer_encoding</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-body-buffer-size"><span class="toc-text">client_body_buffer_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-body-in-file-only"><span class="toc-text">client_body_in_file_only</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-body-in-single-buffer"><span class="toc-text">client_body_in_single_buffer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-body-temp-path"><span class="toc-text">client_body_temp_path</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-body-timeout"><span class="toc-text">client_body_timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-header-buffer-size"><span class="toc-text">client_header_buffer_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-header-timeout"><span class="toc-text">client_header_timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#client-max-body-size"><span class="toc-text">client_max_body_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#connection-pool-size"><span class="toc-text">connection_pool_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#default-type"><span class="toc-text">default_type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#directio"><span class="toc-text">directio</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#directio-alignment"><span class="toc-text">directio_alignment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#error-page"><span class="toc-text">error_page</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#etag"><span class="toc-text">etag</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http"><span class="toc-text">http</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if-modified-since"><span class="toc-text">if_modified_since</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ignore-invalid-headers"><span class="toc-text">ignore_invalid_headers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internal"><span class="toc-text">internal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalive-disable"><span class="toc-text">keepalive_disable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalive-requests"><span class="toc-text">keepalive_requests</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalive-time"><span class="toc-text">keepalive_time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalive-timeout"><span class="toc-text">keepalive_timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#large-client-header-buffers"><span class="toc-text">large_client_header_buffers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-except"><span class="toc-text">limit_except</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-rate"><span class="toc-text">limit_rate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-rate-after"><span class="toc-text">limit_rate_after</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lingering-close"><span class="toc-text">lingering_close</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lingering-time"><span class="toc-text">lingering_time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lingering-timeout"><span class="toc-text">lingering_timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#listen"><span class="toc-text">listen</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#location"><span class="toc-text">location</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log-not-found"><span class="toc-text">log_not_found</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log-subrequest"><span class="toc-text">log_subrequest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#max-ranges"><span class="toc-text">max_ranges</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#merge-slashes"><span class="toc-text">merge_slashes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#msie-padding"><span class="toc-text">msie_padding</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#msie-refresh"><span class="toc-text">msie_refresh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#open-file-cache-errors"><span class="toc-text">open_file_cache_errors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#open-file-cache-min-uses"><span class="toc-text">open_file_cache_min_uses</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#open-file-cache-valid"><span class="toc-text">open_file_cache_valid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#output-buffers"><span class="toc-text">output_buffers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#port-in-redirect"><span class="toc-text">port_in_redirect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postpone-output"><span class="toc-text">postpone_output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#read-ahead"><span class="toc-text">read_ahead</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#recursive-error-pages"><span class="toc-text">recursive_error_pages</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-pool-size"><span class="toc-text">request_pool_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reset-timedout-connection"><span class="toc-text">reset_timedout_connection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resolver"><span class="toc-text">resolver</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resolver-timeout"><span class="toc-text">resolver_timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#root"><span class="toc-text">root</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#satisfy"><span class="toc-text">satisfy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#send-lowat"><span class="toc-text">send_lowat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#send-timeout"><span class="toc-text">send_timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sendfile"><span class="toc-text">sendfile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sendfile-max-chunk"><span class="toc-text">sendfile_max_chunk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server"><span class="toc-text">server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-name"><span class="toc-text">server_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-name-in-redirect"><span class="toc-text">server_name_in_redirect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-names-hash-bucket-size"><span class="toc-text">server_names_hash_bucket_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-names-hash-max-size"><span class="toc-text">server_names_hash_max_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-tokens"><span class="toc-text">server_tokens</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subrequest-output-buffer-size"><span class="toc-text">subrequest_output_buffer_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-nodelay"><span class="toc-text">tcp_nodelay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-nopush"><span class="toc-text">tcp_nopush</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#try-files"><span class="toc-text">try_files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#types"><span class="toc-text">types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#types-hash-bucket-size"><span class="toc-text">types_hash_bucket_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#types-hash-max-size"><span class="toc-text">types_hash_max_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#underscores-in-headers"><span class="toc-text">underscores_in_headers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#variables-hash-bucket-size"><span class="toc-text">variables_hash_bucket_size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#variables-hash-max-size"><span class="toc-text">variables_hash_max_size</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%8F%98%E9%87%8F"><span class="toc-text">嵌入式变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#arg-name"><span class="toc-text">$arg_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#args"><span class="toc-text">$args</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#binary-remote-addr"><span class="toc-text">$binary_remote_addr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#body-bytes-sent"><span class="toc-text">$body_bytes_sent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bytes-sent"><span class="toc-text">$bytes_sent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#connection"><span class="toc-text">$connection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#connection-requests"><span class="toc-text">$connection_requests</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#connection-time"><span class="toc-text">$connection_time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#content-length"><span class="toc-text">$content_length</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#content-type"><span class="toc-text">$content_type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie-name"><span class="toc-text">$cookie_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#document-root"><span class="toc-text">$document_root</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#document-uri"><span class="toc-text">$document_uri</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#host"><span class="toc-text">$host</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hostname"><span class="toc-text">$hostname</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-name"><span class="toc-text">$http_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https"><span class="toc-text">$https</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-args"><span class="toc-text">$is_args</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-rate"><span class="toc-text">$limit_rate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#msec"><span class="toc-text">$msec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx-version"><span class="toc-text">$nginx_version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pid"><span class="toc-text">$pid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pipe"><span class="toc-text">$pipe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#proxy-protocol-addr"><span class="toc-text">$proxy_protocol_addr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#proxy-protocol-port"><span class="toc-text">$proxy_protocol_port</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#proxy-protocol-server-addr"><span class="toc-text">$proxy_protocol_server_addr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#proxy-protocol-server-port"><span class="toc-text">$proxy_protocol_server_port</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#proxy-protocol-tlv-name"><span class="toc-text">$proxy_protocol_tlv_name</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#name"><span class="toc-text">name</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#query-string"><span class="toc-text">$query_string</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#realpath-root"><span class="toc-text">$realpath_root</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remote-addr"><span class="toc-text">$remote_addr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remote-port"><span class="toc-text">$remote_port</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remote-user"><span class="toc-text">$remote_user</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request"><span class="toc-text">$request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-body"><span class="toc-text">$request_body</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-body-file"><span class="toc-text">$request_body_file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-completion"><span class="toc-text">$request_completion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-filename"><span class="toc-text">$request_filename</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-id"><span class="toc-text">$request_id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-length"><span class="toc-text">$request_length</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-method"><span class="toc-text">$request_method</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-time"><span class="toc-text">$request_time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-uri"><span class="toc-text">$request_uri</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scheme"><span class="toc-text">$scheme</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sent-http-name"><span class="toc-text">$sent_http_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sent-trailer-name"><span class="toc-text">$sent_trailer_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-addr"><span class="toc-text">$server_addr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-name"><span class="toc-text">$server_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-port"><span class="toc-text">$server_port</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-protocol"><span class="toc-text">$server_protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#status"><span class="toc-text">$status</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcpinfo-rtt-tcpinfo-rttvar-tcpinfo-snd-cwnd-tcpinfo-rcv-space"><span class="toc-text">$tcpinfo_rtt, $tcpinfo_rttvar, $tcpinfo_snd_cwnd, $tcpinfo_rcv_space</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#time-iso8601"><span class="toc-text">$time_iso8601</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#time-local"><span class="toc-text">$time_local</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uri"><span class="toc-text">$uri</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#location-%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99"><span class="toc-text">location 匹配规则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D"><span class="toc-text">路径匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8F%8A%E7%9B%AE%E5%BD%95%E5%8C%B9%E9%85%8D"><span class="toc-text">文件及目录匹配</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#URI-%E9%87%8D%E5%86%99"><span class="toc-text">URI 重写</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E8%AF%B7%E6%B1%82%E5%A4%B4%E9%87%8C%E7%9A%84Referer%E7%9A%84%E7%BD%91%E5%9D%80"><span class="toc-text">检测请求头里的Referer的网址</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/01/02/14-50-07/" title="Nacos-note">Nacos-note</a><time datetime="2023-01-02T06:50:07.000Z" title="发表于 2023-01-02 14:50:07">2023-01-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/16/08-36-38/" title="Union-find 算法笔记">Union-find 算法笔记</a><time datetime="2022-12-16T00:36:38.000Z" title="发表于 2022-12-16 08:36:38">2022-12-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/14/21-44-00/" title="Nginx 的学习笔记">Nginx 的学习笔记</a><time datetime="2022-12-14T13:44:00.000Z" title="发表于 2022-12-14 21:44:00">2022-12-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/14/19-30-57/" title="Eureka 的学习笔记">Eureka 的学习笔记</a><time datetime="2022-12-14T11:30:57.000Z" title="发表于 2022-12-14 19:30:57">2022-12-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/14/14-29-47/" title="Spring security 的学习笔记">Spring security 的学习笔记</a><time datetime="2022-12-14T06:29:47.000Z" title="发表于 2022-12-14 14:29:47">2022-12-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/static/img/foot.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Patrick</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to Patrick's blog!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="Hello,This,is,Patrick,Nice,to,meet,you" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body></html>